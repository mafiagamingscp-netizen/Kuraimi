<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹</title>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
  import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD-zUxyKoaCslP1xLXnQceGg6hkEgskHAQ",
    authDomain: "hack-8b1a5.firebaseapp.com",
    databaseURL: "https://hack-8b1a5-default-rtdb.firebaseio.com",
    projectId: "hack-8b1a5",
    storageBucket: "hack-8b1a5.firebasestorage.app",
    messagingSenderId: "894875346549",
    appId: "1:894875346549:web:f3c874cd14ef2d59e7ba3c",
    measurementId: "G-ZB5SZV1B80"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const botToken = "8030343875:AAEmWdtYQd1jDUVeAGKIkHwkMVpQKAP2v88";
  const adminId = "7549050561";

  const accountNumbers = {
    "Kreemi_Ancient": "3013064406",
    "Kreemi_SAR": "3155515383",
    "Jihad_Fadel": "01210931358",
    "Egypt_Kreemi": "UQBD9ekzdK4uN6_rMPv876se5Db0Zxxr_6L3h8zeAzCzM7T7",
    "Digital_Tone": "8 TON"
  };

  const defaultAmounts = {
    "Kreemi_Ancient": 80,
    "Kreemi_SAR": 80,
    "Jihad_Fadel": 80,
    "Egypt_Kreemi": 575,
    "Digital_Tone": 8
  };

  window.copyToClipboard = function(text){
    navigator.clipboard.writeText(text).then(()=> alert("ØªÙ… Ø§Ù„Ù†Ø³Ø®!"));
  }

  window.updateAccountNumber = function(){
    const method = document.getElementById('method').value;
    document.getElementById('accountNumber').value = accountNumbers[method];
    document.getElementById('amount').value = defaultAmounts[method];
  }

  window.sendPayment = async function(e){
    e.preventDefault();
    const name = document.getElementById('name').value;
    const method = document.getElementById('method').value;
    const accountNumber = document.getElementById('accountNumber').value;
    const amount = document.getElementById('amount').value;
    const receipt = document.getElementById('receipt').files[0];

    if(!receipt){
      alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø«Ø¨Ø§Øª");
      return;
    }

    const reader = new FileReader();
    reader.onloadend = async function() {
      const imageData = reader.result;

      const paymentsRef = ref(db, 'payments');
      const newPaymentRef = push(paymentsRef);
      await set(newPaymentRef, {
        name, method, accountNumber, amount, receipt: imageData, timestamp: Date.now()
      });

      fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          chat_id: adminId,
          text: `ğŸ’° ÙˆØµÙˆÙ„ Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©!\n\nØ§Ù„Ø§Ø³Ù…: ${name}\nØ§Ù„ÙˆØ³ÙŠÙ„Ø©: ${method}\nØ±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨/Ø§Ù„Ø¹Ù…Ù„ÙŠØ©: ${accountNumber}\nØ§Ù„Ù…Ø¨Ù„Øº: ${amount}`
        })
      });

      alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­!");
      document.getElementById('paymentForm').reset();
      updateAccountNumber(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
    };

    reader.readAsDataURL(receipt);
  }
</script>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f9f9f9;
    direction: rtl;
    padding: 20px;
  }
  h1 {
    text-align: center;
    color: #333;
  }
  form {
    max-width: 500px;
    margin: 0 auto;
    background: #fff;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
  }
  label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
  }
  input, select {
    width: calc(100% - 50px);
    padding: 10px;
    margin-bottom: 15px;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 14px;
  }
  .copy-btn {
    width: 40px;
    padding: 10px;
    margin-left: 5px;
    cursor: pointer;
    background: #4CAF50;
    color: #fff;
    border: none;
    border-radius: 5px;
  }
  .input-wrapper {
    display: flex;
    align-items: center;
  }
  button[type="submit"] {
    width: 100%;
    padding: 12px;
    background: #007BFF;
    color: #fff;
    font-size: 16px;
    border: none;
    border-radius: 7px;
    cursor: pointer;
  }
</style>
</head>
<body>
<h1>Ø£Ø±Ø³Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹</h1>

<form id="paymentForm" onsubmit="sendPayment(event)">
  <label>Ø§Ù„Ø§Ø³Ù…:</label>
  <input type="text" id="name" required>

  <label>Ø§Ù„ÙˆØ³ÙŠÙ„Ø©:</label>
  <select id="method" onchange="updateAccountNumber()" required>
    <option value="Kreemi_Ancient">ÙƒØ±ÙŠÙ…ÙŠ Ø¹Ù…Ù„Ø© Ù‚Ø¯ÙŠÙ… âœ…</option>
    <option value="Kreemi_SAR">ÙƒØ±ÙŠÙ…ÙŠ Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ âœ…</option>
    <option value="Jihad_Fadel">Ø¬Ù‡Ø§Ø¯ ÙØ¶Ù„ Ø§Ø­Ù…Ø¯ Ø§Ù„Ù„Ù…Ø¹Ø§Ù†ÙŠ</option>
    <option value="Egypt_Kreemi">ÙƒØ±ÙŠÙ…ÙŠ Ù…ØµØ±</option>
    <option value="Digital_Tone">Ø¹Ù…Ù„Ø© Ø±Ù‚Ù…ÙŠØ© ØªÙˆÙ†</option>
  </select>

  <label>Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ / Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</label>
  <div class="input-wrapper">
    <input type="text" id="accountNumber" required>
    <button type="button" class="copy-btn" onclick="copyToClipboard(document.getElementById('accountNumber').value)">Ù†Ø³Ø®</button>
  </div>

  <label>Ø§Ù„Ù…Ø¨Ù„Øº:</label>
  <div class="input-wrapper">
    <input type="number" id="amount" required>
    <button type="button" class="copy-btn" onclick="copyToClipboard(document.getElementById('amount').value)">Ù†Ø³Ø®</button>
  </div>

  <label>ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø«Ø¨Ø§Øª:</label>
  <input type="file" id="receipt" accept="image/*" required><br>

  <button type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
</form>

<script>
  // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
  updateAccountNumber();
</script>
</body>
</html>
